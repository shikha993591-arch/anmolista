<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Anmolista Chats</title>
<style>
body{margin:0;background:#050b07;color:white;font-family:system-ui}
header{padding:15px;background:#0b1f14}
input{width:100%;padding:14px;border-radius:12px;border:none}
.chat{padding:15px;border-bottom:1px solid #222}
</style>
</head>
<body>

<header>
  <h2>Anmolista</h2>
  <input id="search" placeholder="Search username">
</header>

<div id="list"></div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBpF3Q1ESL76ywrp2_OVOoOJiFOv322z5M",
  authDomain:"anmolista.firebaseapp.com",
  projectId:"anmolista"
});
const db=firebase.firestore();

search.onkeyup=()=>{
  db.collection("users")
  .where("username","==",search.value.toLowerCase())
  .get().then(s=>{
    list.innerHTML="";
    s.forEach(d=>{
      list.innerHTML+=`
      <div class="chat" onclick="openChat('${d.data().username}')">
        @${d.data().username}
      </div>`;
    });
  });
};

function openChat(u){
  localStorage.chat=u;
  location.href="chat.html";
}
</script>

</body>
</html>
